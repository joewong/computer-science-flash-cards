{% extends "layout.html" %}
{% block body %}

    <h2>Summary</h2>

    <table class="table table-bordered">
        <tr>
            <td class="col-md-3"><b>Date and time of test taken</b></td>
            <td>{{ summary.created_time }}</td>
        </tr>
        <tr>
            <td class="col-md-3"><b>Correct questions</b></td>
            <td>{{ summary.total_correct }}</td>
        </tr>
        <tr>
            <td class="col-md-3"><b>Incorrect questions</b></td>
            <td>{{ summary.total_incorrect }}</td>
        </tr>
        <tr>
            <td class="col-md-3"><b>Total questions</b></td>
            <td>{{ summary.total_questions }}</td>
        </tr>
        <tr>
            <td class="col-md-3"><b>Percentage</b></td>
            <td>{{ summary.percentage }}%</td>
        </tr>
    </table>

    <h2>Questions</h2>

    {% for question in questions %}
    <table class="table table-bordered">
        
        <tr>
            <td class="col-md-3">Id</td>
            <td colspan="2">{{ question.card_id }}</td> 
        </tr>
        <tr>
            <td class="col-md-3">Question</td>
            <td colspan="2">{{ question.front }}</td>
        </tr>
        <tr>
            <td class="col-md-3">Multiple choices</td>
            <td class="col-md-4">
                {% set ns = namespace(found=false) %}
                {% for choice in choices[question.card_id] %}
                    <input type="radio" value="{{ choice['mcId'] }}" name="{{ question.card_id }}" {% if choice['answer'] == answers[question.card_id] %} checked {% endif %} />
                    {{ choice['choice'] }} <br /> 
                    {% if choice['answer'] == choice['correctAnswer'] %}
                    {% set ns.found = true %}
                    {% endif %} 
                {% endfor %} 
            </td>
            <td bgcolor="{% if ns.found %}green{% else %}red{% endif %}">
                <b style="color:white;">{% if ns.found %}CORRECT{% else %}INCORRECT{% endif %}</b>
            </td>
        </tr>
    </table>
    <br />
    {% endfor %}

{% endblock %}